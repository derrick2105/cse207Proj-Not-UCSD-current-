

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>How To Create Assignments &mdash; CSE 207 Project 0.1 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="CSE 207 Project 0.1 documentation" href="index.html"/>
        <link rel="next" title="crypto.games package" href="crypto.games.html"/>
        <link rel="prev" title="How To Complete Assignments" href="how_to_students.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        

        
          <a href="index.html" class="icon icon-home"> CSE 207 Project
        

        
        </a>

        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

        
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">Intro</a><ul>
<li class="toctree-l2"><a class="reference internal" href="intro.html#what-is-this">What is this?</a></li>
<li class="toctree-l2"><a class="reference internal" href="intro.html#why-did-we-create-this">Why did we create this?</a></li>
<li class="toctree-l2"><a class="reference internal" href="intro.html#goals">Goals</a></li>
<li class="toctree-l2"><a class="reference internal" href="intro.html#deliverables">Deliverables</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="quick_start.html">Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="quick_start.html#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="quick_start.html#download-and-install-project-module">Download and install project Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="quick_start.html#opening-a-project">Opening a project</a></li>
<li class="toctree-l2"><a class="reference internal" href="quick_start.html#run-a-sample-assignment">Run a sample assignment</a><ul>
<li class="toctree-l3"><a class="reference internal" href="quick_start.html#from-the-terminal">From the terminal</a></li>
<li class="toctree-l3"><a class="reference internal" href="quick_start.html#from-pycharm">From  Pycharm</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="quick_start.html#editing-opening-assignments">Editing/Opening Assignments</a><ul>
<li class="toctree-l3"><a class="reference internal" href="quick_start.html#id2">From the terminal</a></li>
<li class="toctree-l3"><a class="reference internal" href="quick_start.html#id3">From pycharm</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="quick_start.html#creating-blank-assignments">Creating Blank Assignments</a><ul>
<li class="toctree-l3"><a class="reference internal" href="quick_start.html#id4">From the terminal</a></li>
<li class="toctree-l3"><a class="reference internal" href="quick_start.html#id5">From pycharm</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="conventions.html">Conventions</a></li>
<li class="toctree-l1"><a class="reference internal" href="design_and_architecture.html">Design and Architecture</a><ul>
<li class="toctree-l2"><a class="reference internal" href="design_and_architecture.html#games">Games</a></li>
<li class="toctree-l2"><a class="reference internal" href="design_and_architecture.html#simulators">Simulators</a></li>
<li class="toctree-l2"><a class="reference internal" href="design_and_architecture.html#abstract-cryptography-library">Abstract Cryptography Library</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="how_to_students.html">How To Complete Assignments</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">How To Create Assignments</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#how-to-create-games">How To Create Games</a></li>
<li class="toctree-l2"><a class="reference internal" href="#how-to-create-simulators">How To Create Simulators</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="crypto.games.html">Games</a><ul>
<li class="toctree-l2"><a class="reference internal" href="crypto.games.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="crypto.games.html#module-crypto.games.game">crypto.games.game module</a></li>
<li class="toctree-l2"><a class="reference internal" href="crypto.games.html#module-crypto.games.game_bind">crypto.games.game_bind module</a></li>
<li class="toctree-l2"><a class="reference internal" href="crypto.games.html#module-crypto.games.game_cca">crypto.games.game_cca module</a></li>
<li class="toctree-l2"><a class="reference internal" href="crypto.games.html#module-crypto.games.game_cr">crypto.games.game_cr module</a></li>
<li class="toctree-l2"><a class="reference internal" href="crypto.games.html#module-crypto.games.game_int_ctxt">crypto.games.game_int_ctxt module</a></li>
<li class="toctree-l2"><a class="reference internal" href="crypto.games.html#module-crypto.games.game_kr">crypto.games.game_kr module</a></li>
<li class="toctree-l2"><a class="reference internal" href="crypto.games.html#module-crypto.games.game_lr">crypto.games.game_lr module</a></li>
<li class="toctree-l2"><a class="reference internal" href="crypto.games.html#module-crypto.games.game_prf">crypto.games.game_prf module</a></li>
<li class="toctree-l2"><a class="reference internal" href="crypto.games.html#module-crypto.games.game_ufcma">crypto.games.game_ufcma module</a></li>
<li class="toctree-l2"><a class="reference internal" href="crypto.games.html#module-crypto.games">Module contents</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="crypto.simulator.html">Simulator</a><ul>
<li class="toctree-l2"><a class="reference internal" href="crypto.simulator.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="crypto.simulator.html#module-crypto.simulator.base_sim">crypto.simulator.base_sim module</a></li>
<li class="toctree-l2"><a class="reference internal" href="crypto.simulator.html#module-crypto.simulator.bind_sim">crypto.simulator.bind_sim module</a></li>
<li class="toctree-l2"><a class="reference internal" href="crypto.simulator.html#module-crypto.simulator.cca_sim">crypto.simulator.cca_sim module</a></li>
<li class="toctree-l2"><a class="reference internal" href="crypto.simulator.html#module-crypto.simulator.cr_sim">crypto.simulator.cr_sim module</a></li>
<li class="toctree-l2"><a class="reference internal" href="crypto.simulator.html#module-crypto.simulator.ctxt_sim">crypto.simulator.ctxt_sim module</a></li>
<li class="toctree-l2"><a class="reference internal" href="crypto.simulator.html#module-crypto.simulator.kr_sim">crypto.simulator.kr_sim module</a></li>
<li class="toctree-l2"><a class="reference internal" href="crypto.simulator.html#module-crypto.simulator.lr_sim">crypto.simulator.lr_sim module</a></li>
<li class="toctree-l2"><a class="reference internal" href="crypto.simulator.html#module-crypto.simulator.ufcma_sim">crypto.simulator.ufcma_sim module</a></li>
<li class="toctree-l2"><a class="reference internal" href="crypto.simulator.html#module-crypto.simulator.world_sim">crypto.simulator.world_sim module</a></li>
<li class="toctree-l2"><a class="reference internal" href="crypto.simulator.html#module-crypto.simulator">Module contents</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="crypto.abstract.html">Abstract</a><ul>
<li class="toctree-l2"><a class="reference internal" href="crypto.abstract.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="crypto.abstract.html#module-crypto.abstract.block_cipher">crypto.abstract.block_cipher module</a></li>
<li class="toctree-l2"><a class="reference internal" href="crypto.abstract.html#module-crypto.abstract.digital_signature">crypto.abstract.digital_signature module</a></li>
<li class="toctree-l2"><a class="reference internal" href="crypto.abstract.html#module-crypto.abstract.hash_function">crypto.abstract.hash_function module</a></li>
<li class="toctree-l2"><a class="reference internal" href="crypto.abstract.html#module-crypto.abstract.message_authentication_code">crypto.abstract.message_authentication_code module</a></li>
<li class="toctree-l2"><a class="reference internal" href="crypto.abstract.html#module-crypto.abstract">Module contents</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="crypto.tools.html">Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="crypto.primitives.html">Primitives</a></li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">CSE 207 Project</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>How To Create Assignments</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/how_to_instructors.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <div class="section" id="how-to-create-assignments">
<h1>How To Create Assignments<a class="headerlink" href="#how-to-create-assignments" title="Permalink to this headline">¶</a></h1>
<p>Now that you know how to create a <a class="reference internal" href="quick_start.html"><em>blank assignment</em></a>, we
are going to walk through filling in an assignment. For this
example we will fill in a CCA assignment template:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">crypto.primitives</span> <span class="kn">import</span> <span class="n">random_string_bits</span>
<span class="kn">from</span> <span class="nn">crypto.tools</span> <span class="kn">import</span> <span class="n">xor_strings</span><span class="p">,</span> <span class="n">split</span>
<span class="kn">from</span> <span class="nn">crypto.games.game_cca</span> <span class="kn">import</span> <span class="n">GameCCA</span>
<span class="kn">from</span> <span class="nn">crypto.simulator.cca_sim</span> <span class="kn">import</span> <span class="n">CCASim</span>
<span class="kn">from</span> <span class="nn">crypto.abstract.block_cipher</span> <span class="kn">import</span> <span class="n">BlockCipher</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Let enc: {0,1}^k x {0,1}^n -&gt; {0,1}^n be a block cipher with k,n = INSTRUCTOR TODO.</span>
<span class="sd">Let encrypt, decrypt be the following encryption algorithm and decryption</span>
<span class="sd">algorithms, respectively:</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="n">block</span> <span class="o">=</span> <span class="bp">None</span>
<span class="n">key_len</span> <span class="o">=</span> <span class="bp">None</span>

<span class="k">def</span> <span class="nf">encrypt</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">input_m</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">None</span>
<span class="k">def</span> <span class="nf">decrypt</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">cipher</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">None</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Present  a  practical  adversary A.</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="k">def</span> <span class="nf">adversary</span><span class="p">(</span><span class="n">lr</span><span class="p">,</span> <span class="n">dec</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">State the advantage achieved by your adversary:</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">g</span> <span class="o">=</span> <span class="n">GameCCA</span><span class="p">(</span><span class="n">encrypt</span><span class="p">,</span> <span class="n">decrypt</span><span class="p">,</span> <span class="n">key_len</span><span class="p">,</span> <span class="n">block</span><span class="p">)</span>
    <span class="n">s</span> <span class="o">=</span> <span class="n">CCASim</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="n">adversary</span><span class="p">)</span>

    <span class="k">print</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">The advantage of your adversary is ~&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">compute_advantage</span><span class="p">())</span>
</pre></div>
</div>
<p>First we have the import block:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">crypto.primitives</span> <span class="kn">import</span> <span class="n">random_string_bits</span>
<span class="kn">from</span> <span class="nn">crypto.tools</span> <span class="kn">import</span> <span class="n">xor_strings</span><span class="p">,</span> <span class="n">split</span>
<span class="kn">from</span> <span class="nn">crypto.games.game_cca</span> <span class="kn">import</span> <span class="n">GameCCA</span>
<span class="kn">from</span> <span class="nn">crypto.simulator.cca_sim</span> <span class="kn">import</span> <span class="n">CCASim</span>
<span class="kn">from</span> <span class="nn">crypto.abstract.block_cipher</span> <span class="kn">import</span> <span class="n">BlockCipher</span>
</pre></div>
</div>
<p>The assignment needs to wire the game to the simulator, so we need to import
the GameCCA class and CCASim class. These imports are required in order to
run the assignment. Next, we have imports for functions that will be useful
when creating and completing the assignment. These functions are described in
<a class="reference internal" href="conventions.html"><em>conventions</em></a>.</p>
<p>The next section is the portion that defines key length, block size, and
abstract crypto primitives:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Let enc: {0,1}^k x {0,1}^n -&gt; {0,1}^n be a block cipher with k,n = 128.</span>
<span class="sd">Let encrypt, decrypt be the following encryption algorithm and decryption</span>
<span class="sd">algorithms, respectively:</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="n">n</span> <span class="o">=</span> <span class="mi">128</span>
<span class="n">block</span> <span class="o">=</span> <span class="n">n</span><span class="o">/</span><span class="mi">8</span>
<span class="n">key_len</span> <span class="o">=</span> <span class="n">n</span><span class="o">/</span><span class="mi">8</span>
<span class="n">cipher</span> <span class="o">=</span> <span class="n">BlockCipher</span><span class="p">(</span><span class="n">block</span><span class="p">,</span> <span class="n">key_len</span><span class="p">)</span>
<span class="n">enc</span> <span class="o">=</span> <span class="n">cipher</span><span class="o">.</span><span class="n">encrypt</span>
<span class="n">enc_i</span> <span class="o">=</span> <span class="n">cipher</span><span class="o">.</span><span class="n">decrypt</span>
</pre></div>
</div>
<p>For the example we set n and k = 128 and then we build the block cipher with
these values.</p>
<p>Now we need to define the encryption and decryption functions. I am going to
skip over the implementation details and explain the easiest way to implement
these functions in general. If you want to see the details, this example was
taken from the ind_cca assignment in the assignments folder. It is much
easier to create these functions by converting pseudo-code into python code.
With the help of the conventions section it is easier to define the scheme in
pseudo-code and then convert it to python.</p>
<p>Finally, to be able to run the assignment, you need to create a game object
and a simulator object:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">g</span> <span class="o">=</span> <span class="n">GameCCA</span><span class="p">(</span><span class="n">encrypt</span><span class="p">,</span> <span class="n">decrypt</span><span class="p">,</span> <span class="n">key_len</span><span class="p">,</span> <span class="n">block</span><span class="p">)</span>
    <span class="n">s</span> <span class="o">=</span> <span class="n">CCASim</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="n">adversary</span><span class="p">)</span>

    <span class="k">print</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">The advantage of your adversary is ~&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">compute_advantage</span><span class="p">())</span>
</pre></div>
</div>
<p>To create a game object you need to call the __init__ function of the game
class. To do this you call GameXX(params). In the current example we call
GameCCA. Once the game object is created call the Simulator __init__
function. Finally, run the simulator by calling the compute_advantage function.</p>
<div class="section" id="how-to-create-games">
<h2>How To Create Games<a class="headerlink" href="#how-to-create-games" title="Permalink to this headline">¶</a></h2>
<p>Each assignment has a set of oracles that should be defined in a Game_xx.py
file. To create a blank game follow the steps to create a blank assignment,
but create the game in the crypto.games directory. Below is a sample game
that extends the game GameLR:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">crypto.games.game_lr</span> <span class="kn">import</span> <span class="n">GameLR</span>

<span class="k">class</span> <span class="nc">demo</span> <span class="p">(</span><span class="n">GameLR</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">encrypt</span><span class="p">,</span> <span class="n">key_len</span><span class="p">,</span> <span class="n">block_len</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">g</span> <span class="o">=</span> <span class="n">GameLR</span><span class="p">(</span><span class="n">encrypt</span><span class="p">,</span><span class="n">key_len</span><span class="p">,</span><span class="n">block_len</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">g</span><span class="o">.</span><span class="n">initialize</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">count</span><span class="o">=</span><span class="mi">0</span>

    <span class="k">def</span> <span class="nf">lr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">l</span><span class="p">,</span> <span class="n">r</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">count</span> <span class="o">+=</span><span class="mi">1</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">g</span><span class="o">.</span><span class="n">lr</span><span class="p">(</span><span class="n">l</span><span class="p">,</span> <span class="n">r</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">finalize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">guess</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">count</span> <span class="o">&gt;=</span> <span class="mi">3</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">g</span><span class="o">.</span><span class="n">finalize</span><span class="p">(</span><span class="n">guess</span><span class="p">)</span>
</pre></div>
</div>
<p>Let&#8217;s break this up into smaller digestible sizes.</p>
<p>First, this game leverages the game GameLR so it must be imported:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">crypto.games.game_lr</span> <span class="kn">import</span> <span class="n">GameLR</span>
</pre></div>
</div>
<p>Notice that the class definition takes the GameLR as a parameter. This has to
do with python classes:</p>
<div class="highlight-python"><div class="highlight"><pre>class demo (GameLR):
</pre></div>
</div>
<p>Next we will walk through each function starting with the __init__ function.</p>
<p>init:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">encrypt</span><span class="p">,</span> <span class="n">key_len</span><span class="p">,</span> <span class="n">block_len</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">g</span> <span class="o">=</span> <span class="n">GameLR</span><span class="p">(</span><span class="n">encrypt</span><span class="p">,</span><span class="n">key_len</span><span class="p">,</span><span class="n">block_len</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
</pre></div>
</div>
<p>This is the python class constructor. Here we create a GameLR to use to do
most of the work of us. We also add a variable to the demo class to keep
track of the number of queries made to the lr oracle.
initialize:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">g</span><span class="o">.</span><span class="n">initialize</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">count</span><span class="o">=</span><span class="mi">0</span>
</pre></div>
</div>
<p>The initialize function is used to pass parameters at run time. It is
important to reset variables between runs because the class object is not
destroyed at the end of a run.</p>
<p>lr:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">lr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">l</span><span class="p">,</span> <span class="n">r</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">count</span> <span class="o">+=</span><span class="mi">1</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">g</span><span class="o">.</span><span class="n">lr</span><span class="p">(</span><span class="n">l</span><span class="p">,</span> <span class="n">r</span><span class="p">)</span>
</pre></div>
</div>
<p>The lr oracle in the demo class only increments the count and then calls
the game object to get a cipher text.</p>
<p>finalize:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">finalize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">guess</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">count</span> <span class="o">&gt;=</span> <span class="mi">3</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">g</span><span class="o">.</span><span class="n">finalize</span><span class="p">(</span><span class="n">guess</span><span class="p">)</span>
</pre></div>
</div>
<p>Finalize again will delegate most of the work to the game object, but it does
check the count to make sure the Adversary doesn&#8217;t call the oracle too many
times.</p>
<p>It is important to note that this game will output -1 if the Adversary makes
too many lr oracle calls.</p>
</div>
<div class="section" id="how-to-create-simulators">
<h2>How To Create Simulators<a class="headerlink" href="#how-to-create-simulators" title="Permalink to this headline">¶</a></h2>
<p>Each assignment has a simulator that should be defined in a xx_sim.py
file. To create a blank simulator file, follow the steps to create a blank
assignment, but create the simulator in the crypto.simulator directory. Below
is a breakdown of the LR simulator that extends the base_sim class:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">crypto.simulator.base_sim</span> <span class="kn">import</span> <span class="n">BaseSim</span>

<span class="k">class</span> <span class="nc">LRSim</span><span class="p">(</span><span class="n">BaseSim</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">game</span><span class="o">.</span><span class="n">initialize</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">game</span><span class="o">.</span><span class="n">finalize</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">adversary</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">game</span><span class="o">.</span><span class="n">lr</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">compute_success_ratio</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
        <span class="n">results</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1000</span><span class="p">):</span>
            <span class="n">results</span> <span class="o">+=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">b</span><span class="p">)]</span>

        <span class="n">successes</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">results</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="bp">True</span><span class="p">))</span>
        <span class="n">failures</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">results</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="bp">False</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">successes</span> <span class="o">/</span> <span class="p">(</span><span class="n">successes</span> <span class="o">+</span> <span class="n">failures</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">compute_advantage</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adv = Pr[Right =&gt; 1] - Pr[Left =&gt; 1]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">compute_success_ratio</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">compute_success_ratio</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
</pre></div>
</div>
<p>The BaseSim class is the parent class to all of the simulators and you should
include it in all of your games. If you don&#8217;t you will need to define the
__init__ method. The __init__ function takes as parameters the game and
adversary you wish to simulate.</p>
<p>Each simulator has three functions: a run function that runs the adversary
against the game, an advantage calculator, and a success calculator. These
functions can be designed in any way you want with the caveat that the
advantage is calculated by running the game. The above example does exactly
that. When the compute_advantage is called, the advantage is calculated by
determining the success ratio in each world:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">compute_advantage</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adv = Pr[Right =&gt; 1] - Pr[Left =&gt; 1]</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">compute_success_ratio</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">compute_success_ratio</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
</pre></div>
</div>
<p>The only thing this function does is call the compute_success_ration and
returns an IND-CPA advantage as the success ration in the right world - the
failure ratio in the right world. To see where the game is run we need to
look into the compute_success_ratio function:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">compute_success_ratio</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
    <span class="n">results</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1000</span><span class="p">):</span>
        <span class="n">results</span> <span class="o">+=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">b</span><span class="p">)]</span>

    <span class="n">successes</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">results</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="bp">True</span><span class="p">))</span>
    <span class="n">failures</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">results</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="bp">False</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">successes</span> <span class="o">/</span> <span class="p">(</span><span class="n">successes</span> <span class="o">+</span> <span class="n">failures</span><span class="p">)</span>
</pre></div>
</div>
<p>This function calls the run function 1000 times and sums up the number of times
that the adversary wins. It then returns the ratio for successes to total
runs. Your simulators can, and in many cases should be designed differently.
This is because games have different definitions of success and failure.</p>
<p>The run function is the real simulator. It initializes the the game every
time it is run. This is extremely important. If you do not reinitialize the
game every run, there is a high probability that you will compute an
incorrect advantage. Here is the run function again:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">game</span><span class="o">.</span><span class="n">initialize</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">game</span><span class="o">.</span><span class="n">finalize</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">adversary</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">game</span><span class="o">.</span><span class="n">lr</span><span class="p">))</span>
</pre></div>
</div>
<p>The run function will then call finalize on the output of the Adversary.
Since this is an lr adversary, it will output a guess for the world and
finalize will return true if the guess is correct.</p>
<p>Defining simulators should be fairly straightforward. The run function can be
nearly identical between simulators (with the exception of parameters), but the
advantage and success ratio functions will change most of the time.</p>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="crypto.games.html" class="btn btn-neutral float-right" title="crypto.games package" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="how_to_students.html" class="btn btn-neutral" title="How To Complete Assignments" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, Aviv Kiss, Derrick Smith.
    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>